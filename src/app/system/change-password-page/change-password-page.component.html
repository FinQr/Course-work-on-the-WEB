<app-tool-bar></app-tool-bar>
<div class="form-container">
  <h2>Изменение пароля</h2>
  <div
    [ngClass]="{'has-error': form.get('oldPassword')?.invalid && form.get('oldPassword')?.touched}"
    [ngClass]="{'has-error': form.get('newPassword')?.invalid && form.get('newPassword')?.touched}"
    [ngClass]="{'has-error': form.get('confirmPassword')?.invalid && form.get('confirmPassword')?.touched}"
  >
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="oldPassword">Старый пароль:</label>
        <input type="password" formControlName="oldPassword" required>
        <span *ngIf="form.get('oldPassword')?.errors?.['required']">Пароль не может быть пустым</span>
        <span *ngIf="form.get('oldPassword')?.errors?.['minlength']">
          Пароль должен быть больше 
          {{form.get('oldPassword')?.errors?.['minlength']['requiredLength']}}
          символов. Сейчас {{form.get('oldPassword')?.errors?.['minlength']['actualLength']}}.
        </span>
        <span *ngIf="form.hasError('invalidOldPassword') && form.get('oldPassword')?.dirty">
          Старый пароль введен неверно
        </span>
      </div>

      <div class="form-group">
        <label for="newPassword">Новый пароль:</label>
        <input type="password" formControlName="newPassword" required>
        <span *ngIf="form.get('newPassword')?.errors?.['required']">Пароль не может быть пустым</span>
        <span *ngIf="form.get('newPassword')?.errors?.['minlength']">
          Пароль должен быть больше 
          {{form.get('newPassword')?.errors?.['minlength']['requiredLength']}}
          символов. Сейчас {{form.get('newPassword')?.errors?.['minlength']['actualLength']}}.
        </span>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Подтвердите новый пароль:</label>
        <input type="password" formControlName="confirmPassword" required>
        <span *ngIf="form.get('confirmPassword')?.errors?.['required']">Пароль не может быть пустым</span>
        <span *ngIf="form.get('confirmPassword')?.errors?.['minlength']">
          Пароль должен быть больше 
          {{form.get('confirmPassword')?.errors?.['minlength']['requiredLength']}}
          символов. Сейчас {{form.get('confirmPassword')?.errors?.['minlength']['actualLength']}}.
        </span>
        <span *ngIf="form.hasError('passwordMismatch') && form.get('confirmPassword')?.dirty">
          Пароли не совпадают
        </span>
      </div>

      <button type="submit" [disabled]="form.invalid">Изменить пароль</button>
    </form>
  </div>
</div>
